"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{90886:function(e,i,s){var l=s(85893),a=s(72895),n=s(67294),t=s(6154),c=s(71562),d=s(26910),r=s(28997),o=s.n(r);let m=e=>{let i,s,r,m,{detailData:h,language:p}=e,[x,j]=(0,n.useState)(!1),[k,v]=(0,n.useState)([]),[_,g]=(0,n.useState)(),[N,y]=(0,n.useState)(""),[f,b]=(0,n.useState)(""),[C,I]=(0,n.useState)(0),S=(0,n.useRef)(null),[w,A]=(0,n.useState)(),Z=e=>{b(e.target.value)},[E,R]=(0,n.useState)(""),H=()=>{!1==x&&(R(""),I(0),z()),j(e=>!e)},z=async()=>{try{let{data:e}=await t.Z.post("/api/bookmarkApi/commentReply?u=2&id="+h.id);if(e.results){let i={};e.results.likeunlikes.map(e=>{i[e.comment_id]?i[e.comment_id]={like:i[e.comment_id].like+e.like_unlike==1?1:0,unlike:i[e.comment_id].unlike+like_unlike==0?1:0}:i[e.comment_id]={like:1==e.like_unlike?1:0,unlike:0==e.like_unlike?1:0}});let s=e.results.comments.map(e=>{let s=i[e._id];return{...e,like:(null==s?void 0:s.like)||0,unlike:(null==s?void 0:s.unlike)||0}});v(s)}}catch(e){console.log("er",e)}},T=async e=>{try{let{data:i}=await t.Z.post("/api/bookmarkApi/publishComment?u=2",e);i&&(0!=e.parentid&&I(0),z(),R(""))}catch(e){console.log("er",e)}},U=(e,i,s)=>{e.preventDefault();let l=(0,c.ej)("uid"),a="";if(l){let e=atob((0,c.ej)("uid"));g(a=JSON.parse(e))}l?a.email?"like"==i?O(i,s,a):"dislike"==i?O(i,s,a):"comment"==i&&0==C&&E?T({article_id:h.id,message:E,accountid:"HerZindagi",user_id:a.first_name,emailid:a.email,url:window.location.href,type:"article",isactive:0,parentid:0}):"comment"==i&&0!=C&&E&&T({article_id:h.id,message:E,accountid:"HerZindagi",user_id:a.first_name||"Anonymous User",emailid:a.email,url:window.location.href,type:"article",isactive:0,parentid:C}):F("email"):F("login")},F=e=>{y(e)},B=async e=>{try{let{data:e}=await t.Z.post("/api/middleware/updateProfile",{email:f},{headers:{token:"".concat(_.auth_token)}});if(console.log("00"),200==e.code){let e={..._};e.email=f,(0,c.d8)("uid",btoa(JSON.stringify(e))),A(""),L("")}else if(412==e.code){var i,s,l;(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(s=i.errors)||void 0===s?void 0:s.length)>0&&A(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.errors[0].email)}else 409==e.code?(null==e?void 0:e.message)&&A(null==e?void 0:e.message):A("Invalid Email")}catch(e){console.log("err",e),A("Invalid Email")}},L=()=>{y("")},O=async(e,i,s)=>{try{let l={article_id:h.id,comment_id:i,like_unlike:"like"==e?1:0,accountid:"HerZindagi",user_id:s.first_name,flag:e},{data:a}=await t.Z.post("/api/bookmarkApi/likeUnlike?u=2",l);a&&z()}catch(e){console.log("er",e)}},P=e=>{I(e),S.current&&S.current.focus()};return"hi_IN"==p?(i="इस आर्टिकल पर कमेंट करें",s="अपने फेवरेट आर्टिकल पर कमेंट करने के लिए लॉग इन या रजिस्टर करें।",r="अभी लॉगिन करें",m="आगे बढ़ने के लिए अपना ईमेल ऐड्रेस शेयर करें"):"en_US"==p?(i="Comment on this article",s="Log in or register to comment on your favourite article",r="Login Now",m="Enter your email address to continue"):"ta_IN"==p&&(i="கட்டுரைகள் குறித்த கருத்துக்களைப் பதிவிடவும்.",s="கட்டுரைகள் குறித்த கருத்துக்களைப் பதிவிட வேண்டும் என்றால் லாகின் செய்யவும்",r="இங்கே உள்நுழையவும்.",m="உங்கள் மெயில் ஐடியை பதிவிட்டு தொடரவும்"),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{updateEmail:B,isModalOpen:N,email:f,hideModal:L,saveEmail:Z,title:i,desc:s,loginBtn:r,bookmarkSubHeading:m,error:w,actionRef:"comment_btn"}),(0,l.jsx)("span",{children:(0,l.jsx)("svg",{onClick:H,children:(0,l.jsx)("use",{href:"#comment"})})}),(0,l.jsxs)("div",{className:"feedbackPopup",style:{display:x?"block":"none",zIndex:"99999999"},children:[(0,l.jsx)("div",{className:"overlay",onClick:e=>{H()}}),(0,l.jsxs)("div",{className:"feedbackConent",children:[(0,l.jsxs)("div",{className:"feedbackbox",children:[(0,l.jsx)("b",{className:"closeFeed",children:(0,l.jsx)("a",{className:"close",onClick:e=>{H()}})}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"hidden",name:"article_id",id:"article_id",value:h.id}),(0,l.jsx)("input",{type:"hidden",name:"accountid",id:"accountid",value:"HerZindagi"}),(0,l.jsx)("input",{type:"hidden",name:"user_id",id:"user_id",value:""}),(0,l.jsx)("input",{type:"hidden",name:"emailid",id:"emailid",value:""}),(0,l.jsx)("input",{type:"hidden",name:"url",id:"url",value:"".concat(a.XL.BASE_URL).concat("hi_IN"==p?"hindi/":"ta_IN"==p?"tamil/":"").concat(h.subcategoryUrl,"/").concat(h.webTitleUrl,"-").concat(h.type,"-").concat(h.id)}),(0,l.jsx)("input",{type:"hidden",name:"parentid",id:"parentid",value:"0"}),(0,l.jsx)("input",{type:"hidden",name:"type",id:"type",value:"article"}),(0,l.jsxs)("h4",{children:[(0,l.jsx)("svg",{children:(0,l.jsx)("use",{href:"/sprite.svg#commentarticle"})})," ","hi_IN"==p?"कमैंट्स":"ta_IN"==p?"கருத்துகள்":"Comment"]}),(0,l.jsx)("div",{className:"commentBox",children:(0,l.jsx)("textarea",{ref:S,name:"message",id:"message",cols:"15",rows:"10",value:E,onChange:e=>R(e.target.value),placeholder:"hi_IN"==p?"यहां दिख रहे कमेंट्स का मॉडरेशन स्वचालित है और herzindagi.com द्वारा मैन्युअल रूप से साफ़ नहीं किया गया है":"ta_IN"==p?"*கருத்துகளின் மதிப்பாய்வு தானாக இயங்குகிறது. herzindagi.com-ஆல் கைமுறையாக அழிக்கப்படவில்லை":"*The moderation of comments is automated and not cleared manually by herzindagi.com"})}),(0,l.jsx)("div",{className:"response",children:(0,l.jsx)("input",{type:"button",className:"loginBtn",value:"hi_IN"==p?"पब्लिश":"ta_IN"==p?"வெளியிடுக":"Publish",onClick:e=>U(e,"comment")})}),0!=k.length?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("h5",{children:"hi_IN"==p?"सभी कमैंट्स":"ta_IN"==p?"அனைத்து கருத்துகளும்":"All Comment"})}):""]})]}),(0,l.jsx)("div",{id:"output",className:"outpurbox",children:(0,l.jsx)("ul",{className:"comment",children:k.map(e=>{var i;if(0==e.parentid)return(0,l.jsxs)("li",{className:o().usercomment,children:[(0,l.jsxs)("div",{className:"cmnt ".concat(o().cmnt),children:[(0,l.jsxs)("div",{className:o().name,children:[(0,l.jsx)("div",{className:o().letter,children:null==e?void 0:null===(i=e.user_id)||void 0===i?void 0:i.charAt(0)}),(0,l.jsx)("h5",{children:e.user_id})]}),(0,l.jsxs)("div",{className:o().comtText,children:[(0,l.jsx)("p",{children:e.comments}),(0,l.jsxs)("small",{className:o().date,children:[" ",e.createdAt," IST"]}),(0,l.jsxs)("div",{className:"soical-hz ".concat(o().soicalHZ),children:[(0,l.jsxs)("span",{className:"lft",children:[(0,l.jsxs)("a",{onClick:i=>U(i,"like",e._id),children:[(0,l.jsx)("svg",{children:(0,l.jsx)("use",{href:"/sprite.svg#like"})}),(0,l.jsxs)("b",{id:"likes",children:[" ",e.like," "]})]}),(0,l.jsxs)("a",{onClick:i=>U(i,"dislike",e._id),children:[(0,l.jsx)("svg",{children:(0,l.jsx)("use",{href:"/sprite.svg#dislike"})}),(0,l.jsxs)("b",{id:"dislikes",children:[e.unlike," "]})]})]}),(0,l.jsx)("span",{className:"rgt ".concat(o().rgt),onClick:()=>P(e._id),children:(0,l.jsx)("a",{className:"btn-reply",children:"Reply"})})]})]})]}),k.some(i=>i.parentid===e._id)&&(0,l.jsx)(u,{commentArr:k,parent:e._id,updateReply:P,commentClick:U})]},e._id)})})})]})]})]})},u=e=>{let{commentArr:i,parent:s,commentClick:a,updateReply:n}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("ul",{className:"comment",children:i.map(e=>{var t;if(e.parentid==s)return(0,l.jsxs)("li",{className:"".concat(o().usercomment," ").concat(o().nestedusercomment),children:[(0,l.jsxs)("div",{className:"cmnt ".concat(o().cmnt),children:[(0,l.jsxs)("div",{className:o().name,children:[(0,l.jsx)("div",{className:o().letter,children:null==e?void 0:null===(t=e.user_id)||void 0===t?void 0:t.charAt(0)}),(0,l.jsx)("h5",{children:e.user_id})]}),(0,l.jsxs)("div",{className:o().comtText,children:[(0,l.jsx)("p",{children:e.comments}),(0,l.jsxs)("small",{className:o().date,children:[" ",e.createdAt," IST"]}),(0,l.jsxs)("div",{className:"soical-hz ".concat(o().soicalHZ),children:[(0,l.jsxs)("span",{className:"lft",children:[(0,l.jsxs)("a",{onClick:i=>a(i,"like",e._id),children:[(0,l.jsx)("svg",{children:(0,l.jsx)("use",{href:"/sprite.svg#like"})}),(0,l.jsxs)("b",{id:"likes",children:[" ",e.like," "]})]}),(0,l.jsxs)("a",{onClick:i=>a(i,"dislike",e._id),children:[(0,l.jsx)("img",{src:"https://storage.googleapis.com/events-jagran-com/lsl/dislike.svg"}),(0,l.jsxs)("b",{id:"dislikes",children:[e.unlike," "]})]})]}),(0,l.jsx)("span",{className:"rgt",onClick:()=>n(e._id),children:(0,l.jsx)("a",{className:"btn-reply",children:"Reply"})})]})]})]}),i.some(i=>i.parentid===e._id)&&(0,l.jsx)(u,{commentArr:i,parent:e._id,updateReply:n,commentClick:a})]},e._id)})})})};i.Z=m}}]);